---
/**
 * Sticky filter bar for the calendar page.
 * Contains frequently-used filters: Availability, Single showings, Saved movies.
 * Stays visible while scrolling (frosted glass, position: sticky).
 */
import ToggleGroup from '@components/ToggleGroup.astro';
import CheckboxGroup from '@components/CheckboxGroup.astro';
---

<div class="calendar-filter-bar">
  <div class="filter-bar-row">
    <div class="filter-select-group">
      <label for="hours-filter-select" class="filter-label">Times:</label>
      <select id="hours-filter-select" name="hours-filter-mode" class="filter-select">
        <option value="none">All</option>
        <option value="afterhours">After 5pm + wknds</option>
        <option value="weekends">Weekends</option>
      </select>
      <span id="hours-filter-status" class="filter-status"></span>
    </div>
    <ToggleGroup
      label="Single showings:"
      name="single-showtimes-mode"
      options={[
        { label: 'All', value: 'none' },
        { label: 'Only show unique', value: 'only' }
      ]}
    />
  </div>
</div>

<style>
  .calendar-filter-bar {
    position: sticky;
    top: 0;
    z-index: var(--z-drawer-bg);
    padding: 10px 12px;
    margin: 0 -12px;
    background: color-mix(in srgb, var(--bg-body) 85%, transparent);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--bg-movie-hover);
  }

  .filter-bar-row {
    display: flex;
    align-items: center;
    gap: 16px;
    flex-wrap: wrap;
  }

  .filter-select-group {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
  }

  .filter-label {
    font-size: 14px;
    font-weight: 400;
    color: var(--text-secondary);
    font-family: 'Barlow Semi Condensed', sans-serif;
    text-transform: uppercase;
    letter-spacing: 0.02em;
  }


  .filter-select {
    appearance: none;
    -webkit-appearance: none;
    padding: 6px 28px 6px 10px;
    font-size: 13px;
    font-family: inherit;
    color: var(--text-primary);
    background: var(--bg-movie);
    border: 1px solid var(--bg-movie-hover);
    border-radius: 6px;
    cursor: pointer;
    background-image: url("data:image/svg+xml,%3Csvg width='12' height='12' viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M3 5l3 3 3-3' stroke='%2364748b' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 8px center;
  }

  .filter-select:focus {
    outline: 2px solid var(--accent);
    outline-offset: 1px;
  }

  .filter-status {
    font-size: 12px;
    color: var(--text-tertiary);
    cursor: pointer;
    text-decoration: underline;
    text-decoration-style: dotted;
    text-underline-offset: 2px;
    display: none;
  }

  .filter-status:not(:empty) {
    display: inline;
  }

  .filter-status:hover {
    color: var(--accent);
  }

  @media (max-width: 479px) {
    .filter-bar-row {
      flex-direction: column;
      align-items: flex-start;
      gap: 8px;
    }
  }
</style>
