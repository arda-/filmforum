---
/**
 * DialogWrapper - Astrobook adapter for Dialog component
 *
 * This wrapper exists because:
 * 1. Astrobook doesn't support passing slot content directly to components
 * 2. Dialog requires a trigger button to open (via window.openDialog API)
 * 3. Story needs to demonstrate actual user interaction patterns
 *
 * It uses the composable Dialog components (DialogRoot, DialogHeader, etc.)
 * to create a fully-featured dialog with proper structure.
 *
 * Usage in stories:
 *   args: {
 *     id: 'dialog-sm',
 *     title: 'Confirm Action',
 *     description: 'Are you sure?',
 *     body: 'Dialog content here',
 *     showCloseButton: true,
 *     size: 'sm'
 *   }
 */
import { DialogRoot, DialogHeader, DialogTitle, DialogDescription, DialogBody, DialogFooter, DialogSeparator } from '../Dialog/index';
import Button from '../Button.astro';

interface Props {
  id: string;
  title: string;
  description?: string;
  body?: string;
  showCloseButton?: boolean;
  size?: 'sm' | 'md' | 'lg';
  triggerText?: string;
}

const {
  id,
  title,
  description,
  body = 'Dialog content',
  showCloseButton = true,
  size = 'md',
  triggerText = 'Open Dialog',
} = Astro.props;
---

<div style="padding: 40px; min-height: 400px; display: flex; align-items: center; justify-content: center;">
  <button
    class="dialog-trigger"
    onclick={`window.openDialog('${id}')`}
  >
    {triggerText}
  </button>
</div>

<DialogRoot id={id} size={size} showCloseButton={showCloseButton}>
  <DialogHeader>
    <DialogTitle>{title}</DialogTitle>
    {description && <DialogDescription>{description}</DialogDescription>}
  </DialogHeader>
  {body && (
    <>
      <DialogBody>{body}</DialogBody>
      <DialogSeparator />
    </>
  )}
  <DialogFooter>
    <Button variant="secondary" onclick={`window.closeDialog('${id}')`}>Cancel</Button>
    <Button variant="primary" onclick={`window.closeDialog('${id}')`}>Confirm</Button>
  </DialogFooter>
</DialogRoot>

<style>
  .dialog-trigger {
    padding: 10px 20px;
    background-color: var(--bg-accent, #3b82f6);
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: background-color 0.2s;
  }

  .dialog-trigger:hover {
    background-color: var(--bg-accent-hover, #2563eb);
  }

  .dialog-trigger:active {
    opacity: 0.9;
  }
</style>
