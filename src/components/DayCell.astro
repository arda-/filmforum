---
interface Props {
  date: string;
  hasMovies?: boolean;
  isTimeline?: boolean;
  style?: string;
}

const { date, hasMovies = false, isTimeline = false, style = '' } = Astro.props;

const DAYS = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];

function formatDayLabel(dateStr: string) {
  const d = new Date(dateStr + 'T12:00:00');
  const day = d.getDate();
  const month = d.getMonth() + 1;
  const dayName = DAYS[d.getDay()];
  return `${dayName} ${month}/${day}`;
}

const label = formatDayLabel(date);
const classes = [
  'day',
  hasMovies ? 'has-movies' : '',
  isTimeline ? 'timeline-view' : ''
].filter(Boolean).join(' ');
---

<div class={classes} data-date={date} data-day-number={label} style={style}>
  <div class="day-number">{label}</div>
  <slot />
</div>

<!-- Styles are in src/styles/calendar.css (global) -->
