---
import Layout from '../../layouts/Layout.astro';
---

<Layout title="Card Flip" noindex={true}>
  <div class="demo-container">
    <p class="version">v1</p>
    <h1>Card Flip (FLIP Animation)</h1>
    <p class="subtitle">Demonstrating the FLIP technique for smooth CSS animations</p>

    <div class="grid">
      {[
        { id: 3, title: 'FLIP + Smooth Close', desc: 'Smooth open and close' },
        { id: 2, title: 'FLIP Animation', desc: 'Smooth transform-based expansion' },
        { id: 1, title: 'Original', desc: 'Base card style' },
      ].map((card) => (
        <div class="card" data-id={card.id}>
          <div class="card-content">
            <div class="card-number">{card.id}</div>
            <div class="card-title">{card.title}</div>
            <div class="card-desc">{card.desc}</div>
          </div>
        </div>
      ))}
    </div>

    <div class="expanded-card" id="expandedCard">
      <button class="close-btn" id="closeBtn">Ã—</button>
      <div class="expanded-content">
        <span class="expanded-label" id="expandedLabel"></span>
      </div>
    </div>
  </div>
</Layout>

<script>
  const cards = document.querySelectorAll('.card');
  const expandedCard = document.getElementById('expandedCard');
  const expandedLabel = document.getElementById('expandedLabel');
  const closeBtn = document.getElementById('closeBtn');

  function open(card) {
    const number = card.querySelector('.card-number').textContent;
    expandedLabel.textContent = number;
    expandedCard.classList.add('active');
    document.body.style.overflow = 'hidden';
  }

  function close() {
    expandedCard.classList.remove('active');
    document.body.style.overflow = '';
  }

  cards.forEach((card) => {
    card.addEventListener('click', () => open(card));
  });

  closeBtn.addEventListener('click', close);
</script>

<style>
  .demo-container {
    margin: 0 auto;
    padding: 40px 20px;
  }

  .version {
    font-size: 12px;
    color: var(--text-tertiary);
    margin: 0 0 4px;
  }

  h1 {
    font-size: 32px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 8px;
  }

  .subtitle {
    font-size: 16px;
    color: var(--text-secondary);
    margin-bottom: 48px;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    margin-bottom: 32px;
  }

  .card {
    aspect-ratio: 1;
    background: var(--bg-movie);
    border-radius: 1rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .card-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    text-align: center;
    padding: 20px;
  }

  .card-number {
    font-size: 36px;
    font-weight: 700;
    color: var(--accent);
  }

  .card-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
  }

  .card-desc {
    font-size: 12px;
    color: var(--text-tertiary);
  }

  .expanded-card {
    position: fixed;
    inset: 0;
    margin: auto;
    width: 100%;
    height: 85dvh;
    max-width: calc(100% - 40px);
    background: var(--bg-movie);
    border-radius: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    gap: 24px;
    visibility: hidden;
    z-index: 1000;
  }

  .expanded-card.active {
    visibility: visible;
  }

  .close-btn {
    position: absolute;
    top: 16px;
    right: 16px;
    width: 40px;
    height: 40px;
    border: none;
    background: var(--bg-body);
    color: var(--text-primary);
    border-radius: 50%;
    font-size: 28px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .expanded-content {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    gap: 16px;
  }

  .expanded-label {
    font-size: 72px;
    font-weight: 700;
    color: var(--accent);
  }

</style>
