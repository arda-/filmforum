---
import Layout from '../../layouts/Layout.astro';
---

<Layout title="Card Flip" noindex={true}>
  <div class="demo-container">
    <h1>Card Flip</h1>
    <p class="subtitle">Interactive 3D card flip animation with perspective</p>

    <section class="demo-section">
      <h2>Flip on Hover</h2>
      <p class="section-desc">Cards automatically flip when you hover over them</p>
      <div class="card-grid">
        <div class="flip-card hover">
          <div class="flip-card-inner">
            <div class="flip-card-front">
              <div class="card-content">
                <h3>Front Side</h3>
                <p>Hover to flip</p>
              </div>
            </div>
            <div class="flip-card-back">
              <div class="card-content">
                <h3>Back Side</h3>
                <p>You flipped it!</p>
              </div>
            </div>
          </div>
        </div>

        <div class="flip-card hover">
          <div class="flip-card-inner">
            <div class="flip-card-front">
              <div class="card-content">
                <h3>Movie Card</h3>
                <p>Front content</p>
              </div>
            </div>
            <div class="flip-card-back">
              <div class="card-content">
                <h3>Details</h3>
                <p>Back content</p>
              </div>
            </div>
          </div>
        </div>

        <div class="flip-card hover">
          <div class="flip-card-inner">
            <div class="flip-card-front">
              <div class="card-content">
                <h3>Info Card</h3>
                <p>Front view</p>
              </div>
            </div>
            <div class="flip-card-back">
              <div class="card-content">
                <h3>More Info</h3>
                <p>Back view</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="demo-section">
      <h2>Flip on Click</h2>
      <p class="section-desc">Cards flip when you click them (tap on mobile)</p>
      <div class="card-grid">
        <div class="flip-card click" data-flip="card1">
          <div class="flip-card-inner">
            <div class="flip-card-front">
              <div class="card-content">
                <h3>Click to Flip</h3>
                <p>Interactive card</p>
              </div>
            </div>
            <div class="flip-card-back">
              <div class="card-content">
                <h3>Flipped!</h3>
                <p>Click again to return</p>
              </div>
            </div>
          </div>
        </div>

        <div class="flip-card click" data-flip="card2">
          <div class="flip-card-inner">
            <div class="flip-card-front">
              <div class="card-content">
                <h3>Clickable</h3>
                <p>Front side</p>
              </div>
            </div>
            <div class="flip-card-back">
              <div class="card-content">
                <h3>Revealed</h3>
                <p>Back side</p>
              </div>
            </div>
          </div>
        </div>

        <div class="flip-card click" data-flip="card3">
          <div class="flip-card-inner">
            <div class="flip-card-front">
              <div class="card-content">
                <h3>Toggle Card</h3>
                <p>Press me</p>
              </div>
            </div>
            <div class="flip-card-back">
              <div class="card-content">
                <h3>Toggled</h3>
                <p>Press again</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="demo-section">
      <h2>Variants</h2>
      <p class="section-desc">Different card styles with varying content</p>
      <div class="card-grid">
        <div class="flip-card hover variant-accent">
          <div class="flip-card-inner">
            <div class="flip-card-front">
              <div class="card-content">
                <span class="badge">Featured</span>
                <h3>Accent Theme</h3>
                <p>Colored variant</p>
              </div>
            </div>
            <div class="flip-card-back">
              <div class="card-content">
                <h3>Featured Card</h3>
                <p>Uses accent color for emphasis</p>
              </div>
            </div>
          </div>
        </div>

        <div class="flip-card hover variant-success">
          <div class="flip-card-inner">
            <div class="flip-card-front">
              <div class="card-content">
                <span class="badge success">New</span>
                <h3>Success Theme</h3>
                <p>Positive variant</p>
              </div>
            </div>
            <div class="flip-card-back">
              <div class="card-content">
                <h3>Success Card</h3>
                <p>Indicates positive or success states</p>
              </div>
            </div>
          </div>
        </div>

        <div class="flip-card hover variant-danger">
          <div class="flip-card-inner">
            <div class="flip-card-front">
              <div class="card-content">
                <span class="badge danger">Alert</span>
                <h3>Danger Theme</h3>
                <p>Warning variant</p>
              </div>
            </div>
            <div class="flip-card-back">
              <div class="card-content">
                <h3>Danger Card</h3>
                <p>For alerts and warnings</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</Layout>

<script>
  // Handle click-to-flip cards
  document.querySelectorAll('.flip-card.click').forEach(card => {
    card.addEventListener('click', function() {
      const inner = this.querySelector('.flip-card-inner');
      inner.classList.toggle('flipped');
    });

    // Prevent flip on text selection
    card.addEventListener('mousedown', function(e) {
      if (e.detail > 1) {
        e.preventDefault();
      }
    });
  });

  // Add touch support for mobile
  document.querySelectorAll('.flip-card.hover').forEach(card => {
    let tapped = false;
    card.addEventListener('touchstart', function(e) {
      if (!tapped) {
        tapped = true;
        setTimeout(() => {
          tapped = false;
        }, 300);
      } else {
        const inner = this.querySelector('.flip-card-inner');
        inner.classList.toggle('flipped');
        tapped = false;
      }
    });
  });
</script>

<style>
  .demo-container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 40px 20px;
  }

  h1 {
    font-size: 32px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 8px;
  }

  .subtitle {
    font-size: 16px;
    color: var(--text-secondary);
    margin-bottom: 48px;
  }

  .demo-section {
    margin-bottom: 48px;
  }

  .demo-section h2 {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 8px;
  }

  .section-desc {
    font-size: 14px;
    color: var(--text-tertiary);
    margin-bottom: 24px;
  }

  .card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 24px;
  }

  /* Card Flip Styles */
  .flip-card {
    background-color: transparent;
    width: 100%;
    height: 300px;
    perspective: 1000px;
    cursor: pointer;
  }

  .flip-card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    text-align: center;
    transition: transform 0.6s;
    transform-style: preserve-3d;
  }

  .flip-card.click .flip-card-inner.flipped {
    transform: rotateY(180deg);
  }

  .flip-card.hover:hover .flip-card-inner {
    transform: rotateY(180deg);
  }

  .flip-card-front,
  .flip-card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 12px;
    border: 1px solid var(--bg-movie-hover);
  }

  .flip-card-front {
    background: linear-gradient(135deg, var(--bg-movie) 0%, var(--bg-body) 100%);
    color: var(--text-primary);
  }

  .flip-card-back {
    background: linear-gradient(135deg, var(--accent) 0%, rgba(100, 200, 255, 0.2) 100%);
    color: var(--text-primary);
    transform: rotateY(180deg);
  }

  .card-content {
    padding: 24px;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
  }

  .card-content h3 {
    margin: 0;
    font-size: 20px;
    font-weight: 600;
  }

  .card-content p {
    margin: 0;
    font-size: 14px;
    opacity: 0.8;
  }

  .badge {
    display: inline-block;
    padding: 4px 8px;
    background: var(--accent);
    color: var(--bg-body);
    border-radius: 4px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.04em;
  }

  .badge.success {
    background: #10b981;
  }

  .badge.danger {
    background: #ef4444;
  }

  /* Variant Styles */
  .variant-accent .flip-card-back {
    background: linear-gradient(135deg, var(--accent) 0%, rgba(100, 200, 255, 0.3) 100%);
  }

  .variant-success .flip-card-back {
    background: linear-gradient(135deg, #10b981 0%, rgba(16, 185, 129, 0.2) 100%);
  }

  .variant-danger .flip-card-back {
    background: linear-gradient(135deg, #ef4444 0%, rgba(239, 68, 68, 0.2) 100%);
  }

  @media (max-width: 768px) {
    .flip-card {
      height: 250px;
    }

    .card-grid {
      grid-template-columns: 1fr;
    }

    .card-content {
      padding: 16px;
    }

    .card-content h3 {
      font-size: 18px;
    }
  }
</style>
