---
/**
 * Demo page for session list components.
 * Showcases the drawer, reaction buttons, and card components in isolation.
 */
import Layout from '../../layouts/Layout.astro';
import MovieCard from '../../components/session/MovieCard.astro';
import MovieListItem from '../../components/session/MovieListItem.astro';
import ReactionButtons from '../../components/session/ReactionButtons.astro';
import Drawer from '../../components/Drawer.astro';
import type { UniqueMovie } from '../../types/session';

const sampleMovie: UniqueMovie = {
  id: 'lonesome',
  movie: {
    Movie: 'LONESOME',
    Time: '12:30',
    Tickets: '#',
    Datetime: '2026-02-06T12:30:00',
    year: '1928',
    director: 'Paul Fejos',
    actors: 'Glenn Tryon, Barbara Kent',
    runtime: '70 minutes',
    description: 'Two single New York residents meet and become separated during a Coney Island outing, then later reconnect.',
    country: 'U.S.',
    film_url: '#',
    poster_url: '/posters/lonesome.png',
  },
  showtimes: [{ datetime: '2026-02-06T12:30:00', time: '12:30', tickets: '#' }],
};

const sampleMovie2: UniqueMovie = {
  id: 'taxi',
  movie: {
    Movie: 'TAXI!',
    Time: '2:10',
    Tickets: '#',
    Datetime: '2026-02-06T14:10:00',
    year: '1932',
    director: 'Roy Del Ruth',
    actors: 'James Cagney, Loretta Young',
    runtime: '69 minutes',
    description: 'A cocky New York cab driver struggles to keep his hands off his new bride during their wedding supper.',
    country: 'U.S.',
    film_url: '#',
    poster_url: '/posters/taxi.png',
  },
  showtimes: [{ datetime: '2026-02-06T14:10:00', time: '2:10', tickets: '#' }],
};
---

<Layout title="Session List Demo">
  <main class="demo-page">
    <h1>Session List Components</h1>
    <p class="demo-subtitle">Component showcase for the session list feature</p>

    <a href="/s/tenement-stories/list" class="demo-live-link">
      View live session list â†’
    </a>

    <section class="demo-section">
      <h2>Reaction Buttons</h2>
      <div class="demo-grid">
        <div class="demo-item">
          <h3>Default (md)</h3>
          <ReactionButtons movieId="demo-1" />
        </div>
        <div class="demo-item">
          <h3>Small (sm)</h3>
          <ReactionButtons movieId="demo-2" size="sm" />
        </div>
        <div class="demo-item">
          <h3>Pre-selected: Yes</h3>
          <ReactionButtons movieId="demo-3" reaction="yes" />
        </div>
        <div class="demo-item">
          <h3>Pre-selected: Maybe</h3>
          <ReactionButtons movieId="demo-4" reaction="maybe" />
        </div>
      </div>
    </section>

    <section class="demo-section">
      <h2>Movie Card</h2>
      <div class="demo-card-grid">
        <div>
          <h3>Default</h3>
          <MovieCard uniqueMovie={sampleMovie} />
        </div>
        <div>
          <h3>With reaction</h3>
          <MovieCard uniqueMovie={sampleMovie2} reaction="yes" />
        </div>
        <div>
          <h3>No image</h3>
          <MovieCard uniqueMovie={sampleMovie} showImage={false} />
        </div>
        <div>
          <h3>With blurb</h3>
          <MovieCard uniqueMovie={sampleMovie2} showBlurb={true} />
        </div>
      </div>
    </section>

    <section class="demo-section">
      <h2>Movie List Item</h2>
      <div class="demo-list">
        <MovieListItem uniqueMovie={sampleMovie} />
        <MovieListItem uniqueMovie={sampleMovie2} reaction="yes" />
        <MovieListItem uniqueMovie={sampleMovie} reaction="maybe" showBlurb={true} />
        <MovieListItem uniqueMovie={sampleMovie2} reaction="no" />
      </div>
    </section>

    <section class="demo-section">
      <h2>Drawer</h2>
      <button class="demo-btn" id="open-demo-drawer">Open demo drawer</button>
      <Drawer id="demo-drawer" title="Demo Drawer">
        <p style="color: var(--text-secondary); line-height: 1.6;">
          This is a vaul-style drawer component. It slides up from the bottom,
          has a drag handle for swipe-to-dismiss, closes on backdrop click or Escape,
          and locks body scroll when open.
        </p>
        <div style="margin-top: 16px;">
          <ReactionButtons movieId="drawer-demo" />
        </div>
      </Drawer>
    </section>
  </main>
</Layout>

<script>
  document.getElementById('open-demo-drawer')?.addEventListener('click', () => {
    (window as any).openDrawer('demo-drawer');
  });
</script>

<style>
  .demo-page {
    max-width: 700px;
    margin: 0 auto;
    padding: 20px 16px 60px;
  }

  h1 {
    font-size: 24px;
    color: var(--text-primary);
    margin: 0;
  }

  .demo-subtitle {
    font-size: 14px;
    color: var(--text-secondary);
    margin: 4px 0 0 0;
  }

  .demo-live-link {
    display: inline-block;
    margin: 12px 0 0 0;
    font-size: 14px;
    color: var(--accent);
    text-decoration: none;
    font-weight: 500;
  }

  .demo-live-link:hover {
    text-decoration: underline;
  }

  .demo-section {
    margin-top: 32px;
  }

  .demo-section h2 {
    font-size: 18px;
    color: var(--text-primary);
    margin: 0 0 12px 0;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--bg-grid);
  }

  .demo-section h3 {
    font-size: 13px;
    color: var(--text-secondary);
    margin: 0 0 8px 0;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .demo-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
  }

  .demo-item {
    padding: 16px;
    background: var(--bg-day);
    border-radius: 8px;
  }

  .demo-card-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
  }

  .demo-card-grid h3 {
    margin-bottom: 6px;
  }

  .demo-list {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .demo-btn {
    padding: 10px 20px;
    font-size: 14px;
    font-weight: 500;
    font-family: inherit;
    background: var(--accent);
    color: #fff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.15s;
  }

  .demo-btn:hover {
    background: var(--accent-bg);
  }

  @media (max-width: 480px) {
    .demo-grid,
    .demo-card-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
